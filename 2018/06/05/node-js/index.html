<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="node.js"><meta name="keywords" content="Javascript,node.js"><meta name="author" content="Fantacy-Xu,undefined"><meta name="copyright" content="Fantacy-Xu"><title>node.js【Fantacy】</title><link rel="stylesheet" href="/css/fan.css"><link rel="stylesheet" href="/css/thirdparty/jquery.mCustomScrollbar.min.css"><link rel="icon" href="/img/headpic.jpg"><!-- script(src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML")--><script src="/js/mathjax/mathjax.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
});
</script><script>var isPassword = '' || false;
if (isPassword) {
    if (prompt('请输入文章密码') !== '') {
        alert('密码错误！');
        history.back();
    }
}</script><script>window.GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
}</script></head><body><canvas id="universe"></canvas><!--#body--><div id="sidebar"><div class="toggle-sidebar-info button-hover"><span data-toggle="文章目录">站点概览</span></div><div class="sidebar-toc"><div class="sidebar-toc-title">目录</div><div class="sidebar-toc-progress"><span class="progress-notice">您已阅读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc-progress-bar"></div></div><div class="sidebar-toc-content" id="sidebar-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#nodejs概述nodejs介绍"><span class="toc-number">1.</span> <span class="toc-text">nodejs概述nodejs介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#node-js-有哪些特点？"><span class="toc-number">2.</span> <span class="toc-text">node.js 有哪些特点？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#浏览器、nodejs和其他服务器之间的关系"><span class="toc-number">3.</span> <span class="toc-text">浏览器、nodejs和其他服务器之间的关系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#编写nodejs程序"><span class="toc-number">4.</span> <span class="toc-text">编写nodejs程序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#通过nodejs-读写文件"><span class="toc-number">5.</span> <span class="toc-text">通过nodejs 读写文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#写入数据到文件"><span class="toc-number">6.</span> <span class="toc-text">写入数据到文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#读写文件注意事项"><span class="toc-number">7.</span> <span class="toc-text">读写文件注意事项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#练习内置路径模块Path"><span class="toc-number">8.</span> <span class="toc-text">练习内置路径模块Path</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实现不同请求响应不同的静态文件"><span class="toc-number">9.</span> <span class="toc-text">实现不同请求响应不同的静态文件</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info-avatar"><img class="author-info-avatar-img" src="/img/headpic.jpg"></div><div class="author-info-name">Fantacy-Xu</div><div class="author-info-description"></div><div class="links-buttons"><a class="links-button button-hover" href="https://fantacy-Xu.github.io" target="_blank">GitHub<i class="icon-dot bg-color8"></i></a><a class="links-button button-hover" href="mailto:535137339@qq.com" target="_blank">E-Mail<i class="icon-dot bg-color7"></i></a><a class="links-button button-hover" href="tencent://message/?uin=1019593584&amp;Site=&amp;Menu=yes" target="_blank">QQ<i class="icon-dot bg-color2"></i></a></div><div class="author-info-articles"><a class="author-info-articles-archives article-meta" href="/archives"><span class="pull-top">日志</span><span class="pull-bottom">6</span></a><a class="author-info-articles-tags article-meta" href="/tags"><span class="pull-top">标签</span><span class="pull-bottom">9</span></a><a class="author-info-articles-categories article-meta" href="/categories"><span class="pull-top">分类</span><span class="pull-bottom">12</span></a></div></div></div><div id="main-container"><header><div id="menu-outer"><i class="menu-list-icon fas fa-bars"></i><nav id="menu-inner"><a class="menu-item" href="/">首页</a><a class="menu-item" href="/tags">标签</a><a class="menu-item" href="/categories">分类</a><a class="menu-item" href="/archives">归档</a><a class="menu-item" href="/about">关于</a></nav><div class="right-info"><a class="title-name" href="/">Fantacy</a><span id="now-time"></span></div></div></header><div id="content-outer"><div id="content-inner"><article id="post"><div class="post-header"><div class="title">node.js</div><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 发表于 2018-06-05 | 更新于 2019-06-05</time><!--time.button-hover.post-date #[i.fas.fa-calendar-alt.article-icon(aria-hidden="true")] #[=__('post.modified')] #[=date(page['updated'], config.date_format)]--><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/H5/">H5</a><i class="fa fa-angle-right" style="margin: 0 8px;"></i><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/H5/node-Js/">node.Js</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/Javascript/">Javascript</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/node-js/">node.js</a></div></div></div><div class="main-content"><h2 id="nodejs概述nodejs介绍"><a href="#nodejs概述nodejs介绍" class="headerlink" title="nodejs概述nodejs介绍"></a>nodejs概述nodejs介绍</h2><ul>
<li><p>Node.js 是一个基于 Chrome V8 引擎的 JavaScript 开发平台，使得JavaScript成为服务端开发语言得以实现。</p>
</li>
<li><p>何为开发平台？有对应的编程语言、有语言运行Runtime环境、有能实现特定功能的API（SDK：Software Development Kit）。 apache -php、tomcat - java、 nodejs- js</p>
</li>
<li><p>基于 node.js 可以开发桌面应用程序（GUI -借助 node-webkit、electron 等框架实现）、Web 应用程序（网站） 等。</p>
</li>
<li><p>node.js 相关网站</p>
<ul>
<li>node.js官方网站<img src="https://nodejs.org/en/" alt> </li>
<li>node.js中文网<img src="http://nodejs.cn/" alt></li>
<li>node.js 中文社区<img src="https://cnodejs.org/" alt></li>
</ul>
</li>
</ul>
<h2 id="node-js-有哪些特点？"><a href="#node-js-有哪些特点？" class="headerlink" title="node.js 有哪些特点？"></a>node.js 有哪些特点？</h2><ul>
<li>单线程 (JavaScript运行机制)<ul>
<li>非阻塞 I/O 模型，当执行异步I/O操作时，不会阻塞。（I/O=input/output） (JavaScript运行机制)</li>
<li>IO:磁盘读写IO,网络IO</li>
<li>拥有世界最大的开源库生态系统 —— npm（Nodejs Package Manager即node包管理器）</li>
</ul>
</li>
</ul>
<hr>
<h2 id="浏览器、nodejs和其他服务器之间的关系"><a href="#浏览器、nodejs和其他服务器之间的关系" class="headerlink" title="浏览器、nodejs和其他服务器之间的关系"></a>浏览器、nodejs和其他服务器之间的关系</h2><ul>
<li><p>安装nodejs</p>
</li>
<li><p>由于Node.js平台是在后端运行JavaScript代码，所以，必须首先在本机安装Node环境 </p>
</li>
<li><p>下载地址</p>
</li>
<li><p>当前版本<img src="https://nodejs.org/en/download/" alt></p>
</li>
<li><p>历史版本<img src="https://nodejs.org/en/download/releases/" alt></p>
</li>
<li><p>官网术语解释</p>
<ul>
<li>LTS 版本：Long-term Support 版本，长期支持版，即稳定版。 </li>
<li>Current 版本：Latest Features 版本，最新版本，新特性会在该版本中最先加入。</li>
</ul>
</li>
<li><p>注意：</p>
<ul>
<li>安装完毕后通过命令：node -v来查看版本确定是否安装成功,安装成功也内置了npm命令，也可通过npm -v查看版本号。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Microsoft Windows [版本 10.0.17134.345]</span><br><span class="line">(c) 2018 Microsoft Corporation。保留所有权利。</span><br><span class="line"></span><br><span class="line">C:\Users\Administrator&gt;node -v</span><br><span class="line">v10.15.0</span><br><span class="line"></span><br><span class="line">C:\Users\Administrator&gt;npm -v</span><br><span class="line">6.4.1</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>如需要可以配置环境变量。可以让node和npm命令在任意目录都可使用（注意：安装时默认配置了环境变量）</p>
</li>
<li><p>步骤：我的计算机-&gt;右键属性-&gt;高级系统设置-&gt;高级-&gt;环境变量-&gt;path</p>
</li>
</ul>
<hr>
<h2 id="编写nodejs程序"><a href="#编写nodejs程序" class="headerlink" title="编写nodejs程序"></a>编写nodejs程序</h2><ul>
<li>之前所编写的javascript代码都是在浏览器中运行的，因此可以直接在浏览器的控制器console中编写js代码并运行。</li>
<li>现在我们编写的javascrip代码都是在Node环境中执行，执行方式有两种 <ul>
<li>方式一：在window命令行环境中输入指令node并回车，进行node的交互式环境,编写javascript代码执行即可。其中node交互式环境也称之为REPL(Read Eval Print Loop-读取评估打印循环 )，按两次ctrl+c,可退出REPL环境。</li>
</ul>
</li>
</ul>
<ul>
<li>先输入node指令，进入node的交互式环境，在输入js代码。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;node</span><br><span class="line">&gt; 1+12</span><br></pre></td></tr></table></figure>

<ul>
<li><p>方式二：把javascript代码写在后缀为.js的文件中，如有一个hello.js文件，在window命令行中输入node hello.js即可执行。</p>
</li>
<li><p>如在hello.js中编写以下代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var a = 1;</span><br><span class="line">var b = 1;</span><br><span class="line">console.log(a+b);</span><br></pre></td></tr></table></figure>
</li>
<li><p>命令行中执行： node hello.js</p>
</li>
<li><p>思考:之前在浏览器中的的window、history、location、document等对象在node环境还支持吗？</p>
<ul>
<li>答:不支持了，因为window、history、location等对象是基于浏览器的，而现在我们是基于node环境。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">## node环境中输入会报错</span><br><span class="line">&gt; history</span><br><span class="line">ReferenceError: history is not defined</span><br><span class="line">&gt; window</span><br><span class="line">ReferenceError: window is not defined&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>注：在浏览器环境中全局对象是window，在node环境中全局对象变为global</p>
</li>
</ul>
<hr>
<h2 id="通过nodejs-读写文件"><a href="#通过nodejs-读写文件" class="headerlink" title="通过nodejs 读写文件"></a>通过nodejs 读写文件</h2><ul>
<li><p>官方文档：<a href="http://nodejs.cn/api/fs.html" target="_blank" rel="noopener">http://nodejs.cn/api/fs.html</a> </p>
</li>
<li><p>使用到的文件系统模块var fs = require(‘fs’);</p>
<ul>
<li>写文件：fs.writeFile(file, data[, options], callback);</li>
<li>参数1：要写入的文件路径，必填。</li>
<li>参数2：要写入的数据，必填。</li>
<li>参数3：写入文件时的选项，比如：文件编码。 </li>
<li>参数4：文件写入完毕后的回调函数，必填。 </li>
<li>写文件注意：<ul>
<li>该操作采用异步执行</li>
<li>如果文件存在则替换原内容</li>
<li>默认写入的文件编码为utf8</li>
<li>回调函数有1个参数：err，表示在写入文件的操作过程中是否出错了。</li>
<li>如果出错了err != null，成功时 err === null</li>
</ul>
</li>
</ul>
</li>
<li><p>读文件：fs.readFile(file[, options], callback)</p>
<ul>
<li>参数1：要读取的文件路径，必填。</li>
<li>参数2：读取文件时的选项，比如：文件编码utf8。选填。</li>
<li>参数3：文件读取完毕后的回调函数，必填。</li>
<li>读文件注意：<ul>
<li>该操作采用异步执行</li>
<li>回调函数有两个参数，分别是err和data</li>
<li>如果读取文件时没有指定编码，那么返回的将是二进制数据，如果指定了编码如utf8，那么会返回指定的编码数据。</li>
<li>只要异步操作，回调函数第一个都是错误对象err优先</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h2 id="写入数据到文件"><a href="#写入数据到文件" class="headerlink" title="写入数据到文件"></a>写入数据到文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//导入内置文件模块fs(file System)var fs = require(&apos;fs&apos;);</span><br><span class="line">var str = &apos;hello world 你好&apos;;</span><br><span class="line">//写入文件（文件不存在则自动创建）</span><br><span class="line">fs.writeFile(&apos;data.txt&apos;,str,&apos;utf8&apos;,function(err)&#123;</span><br><span class="line">if(err)&#123;</span><br><span class="line">//抛出错误信息</span><br><span class="line">throw err;</span><br><span class="line">&#125;</span><br><span class="line">console.log(&apos;写入ok&apos;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>注：writeFile写入文件是先把文件内容清空在写入，如果要追加写入的话可以使用appendFile函数读取文件数据<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var fs = require(&apos;fs&apos;);</span><br><span class="line">fs.readFile(&apos;./data.txt&apos;,&apos;utf8&apos;,function(err,data)&#123;</span><br><span class="line">if(err)&#123;</span><br><span class="line">throw err; //抛出异常信息</span><br><span class="line">&#125;</span><br><span class="line">//打印读取到的文件数据</span><br><span class="line">console.log(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<hr>
<h2 id="读写文件注意事项"><a href="#读写文件注意事项" class="headerlink" title="读写文件注意事项"></a>读写文件注意事项</h2><pre><code>1. 异步操作无法通过 try-catch 来捕获异常，只能通过回调函数的 err参数 来判断是否出错。     
2. 只有同步操作可以通过 try-catch 来捕获异常。     
3. 不要使用 fs.existsSync(path, callback) 来判断文件是否存在，直接判断 err 即可</code></pre><hr>
<h2 id="练习内置路径模块Path"><a href="#练习内置路径模块Path" class="headerlink" title="练习内置路径模块Path"></a>练习内置路径模块Path</h2><ul>
<li>文档链接：<a href="http://nodejs.cn/api/path.html使用内置模块http搭建web服务器（类似apache）" target="_blank" rel="noopener">http://nodejs.cn/api/path.html使用内置模块http搭建web服务器（类似apache）</a></li>
<li>文档链接：<br><a href="http://nodejs.cn/api/http.html#http_http_createserver_options_requestlistener" target="_blank" rel="noopener">http://nodejs.cn/api/http.html#http_http_createserver_options_requestlistener</a></li>
<li>步骤：<ol>
<li>加载http模块</li>
<li>创建http服务，</li>
<li>服务端对象监听request 请求事件，用于监听客户端的请求</li>
<li>启动http服务，监听端口</li>
</ol>
</li>
</ul>
<ul>
<li><p>参考代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// 1. 加载http模块var http = require(&apos;http&apos;);</span><br><span class="line"></span><br><span class="line">// 2. 创建http服务，设置监听request 请求事件的处理程序var server = http.createServer();</span><br><span class="line"></span><br><span class="line">// 3. 服务端对象监听request 请求事件，用于监听客户端的请求</span><br><span class="line">server.on(&apos;request&apos;,function (req, res) &#123;</span><br><span class="line">//req-请求对象 , res-响应对象</span><br><span class="line">//处理客户端请求逻辑</span><br><span class="line">console.log(&apos;有人请求了~~&apos;);</span><br><span class="line">res.end(); //必须结束响应，否则浏览器会被挂起</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 4. 启动http服务，开始监听3000端口</span><br><span class="line">server.listen(3000, function () &#123;</span><br><span class="line">console.log(&apos;服务已经启动，请访问： http://localhost:3000&apos;);&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>注意：</p>
<ol>
<li>在监听request事件中，最后一定要res.end()结束响应。</li>
<li>浏览器显示中文可能是乱码，需设置响应头告诉浏览器显示时所使用的编码，要在res.end()之前设置<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">res.setHeader(&quot;Content-type&quot;,&quot;text/plain;charset=utf-8&quot;); // 响应为纯文本</span><br><span class="line">res.setHeader(&quot;Content-type&quot;,&quot;text/html;charset=utf-8&quot;); //响应为html格式，能够解析html标签</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>注意：Chrome 浏览器默认无法手动设置编码，需要安装”Set Character Encoding”扩展。</p>
</li>
</ul>
<hr>
<h2 id="实现不同请求响应不同的静态文件"><a href="#实现不同请求响应不同的静态文件" class="headerlink" title="实现不同请求响应不同的静态文件"></a>实现不同请求响应不同的静态文件</h2><ul>
<li><p>安装nodemon工具</p>
</li>
<li><p>每次修改完js文件之后，都要重新启动node服务，这样非常影响开发效率,使用nodemon工具会自动监测项目中的文件变化,一旦发现文件有改动,nodemon 会自动重启node服务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install nodemon -g</span><br></pre></td></tr></table></figure>
</li>
<li><p>注意：全局安装仅能当全局命令去使用。nrm（npm下载源管理器）</p>
</li>
<li><p>可参考地址：<a href="https://segmentfault.com/a/1190000000473869" target="_blank" rel="noopener">https://segmentfault.com/a/1190000000473869</a></p>
</li>
</ul>
</div><div class="post-copyright"><div class="post-copyright-author"><span class="post-copyright-meta">本文作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Fantacy-Xu</a></span></div><div class="post-copyright-type"><span class="post-copyright-meta">本文链接: </span><span class="post-copyright-info"><a href="http://yoursite.com/2018/06/05/node-js/">http://yoursite.com/2018/06/05/node-js/</a></span></div><div class="post-copyright-notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://yoursite.com">Fantacy</a>！</span></div></div></article><div id="pagination"><div class="next-post pull-right"><span class="line line-top"></span><span class="line line-right"></span><span class="line line-bottom"></span><span class="line line-left"></span><a href="/2018/06/03/设计者模式/"><span>设计者模式</span><span>&nbsp;</span><i class="fas fa-angle-right"></i></a></div></div><!--div!= paginator()--></div></div><div class="button-hover" id="return-top"><i class="fas fa-arrow-up" aria-hidden="true"></i></div><footer><div id="footer"><div class="button-hover" id="side-button"><i class="fas fa-arrow-right"></i></div><div class="right-content"><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fas fa-file-o"></i></span><span id="busuanzi_value_page_pv"></span><span></span></div><div class="copyright">&copy;2017 ～ 2019 By Fantacy-Xu</div></div></div></footer></div><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery-3.3.1.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/velocity.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery.mCustomScrollbar.concat.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/fan.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/canvas_bg.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/utils.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/scroll.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/sidebar.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/copy.js"></script><!--script(src=url)--></body></html>